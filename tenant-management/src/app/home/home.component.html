<div class="content">
  <div class="main-header">
    <div class="row mb-3 justify-content-between align-items-center px-2">
      <div class="col-12 col-sm-6 col-lg-9 header">
        <h3 class="fw-bold red">Tenant Management</h3>
      </div>
      <div class="col-12 col-sm-6 col-lg-3 d-flex justify-content-end header">

        <button type="button" mat-flat-button color="warn" class="gradient-button" (click)="openModal(createTenantComponet)">Add Tenant</button>
      </div>
    </div>
  </div>
  <div class="card mx-5 style">
    <div class="search-container">
      <div class="row mb-3 justify-content-between align-items-center px-2 mx-2">
        <div class="col-12 col-sm-6 col-lg-9 header">
        </div>
        <div class="col-12 col-sm-6 col-lg-3 d-flex justify-content-end header">
          <mat-form-field appearance="outline" floatLabel="always">
            <mat-label>Search</mat-label>
            <input matInput [formControl]="searchControl" type="text" placeholder="Enter name or email">
            
            <mat-icon matPrefix>search</mat-icon>
            
            <button *ngIf="filterValue" matSuffix mat-icon-button aria-label="Clear" (click)="filterValue=''">
              <mat-icon>close</mat-icon>
            </button>
          </mat-form-field>

        </div>
      </div>
      <div class="mb-2">
        <ng-container *ngIf="!showLoading; else load">
          <div *ngIf="dataSource?.data?.length !== 0">
            <div *ngIf="hasVisibleRows()">
              <div class="table-view px-4">
                <div class="example-table-container">
                  <table mat-table [dataSource]="dataSource">

                    <ng-container matColumnDef="tenant_code">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header class="fs-6"> Tenant Code </th>
                      <td mat-cell *matCellDef="let element" class='m-card-title ' test data-label='Tenant Code'>
                        {{element.tenant_code}}</td>
                    </ng-container>

                    <ng-container matColumnDef="tenant_name">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header  class="fs-6"> Tenant Name </th>
                      <td mat-cell *matCellDef="let element" class='m-card-sub-title' data-label='Tenant Name'>
                        {{element.tenant_name}} </td>
                    </ng-container>

                    <ng-container matColumnDef="tenant_email">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header  class="fs-6"> Tenant Email </th>
                      <td mat-cell *matCellDef="let element" class='has_label_on_mobile' data-label='Tenant Email'>
                        {{element.tenant_email}} </td>
                    </ng-container>

                    <ng-container matColumnDef="created_at">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header  class="fs-6"> Creation Date</th>
                      <td mat-cell *matCellDef="let element" class='has_label_on_mobile' data-label='Creation Date'>
                        {{element.created_at | date}} </td>
                    </ng-container>

                    <ng-container matColumnDef="status">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header  class="fs-6">Status</th>
                     
                        <td mat-cell *matCellDef="let element" class="has_label_on_mobile" data-label="Active/Inactive">
                          <mat-chip [ngClass]="{'active': element.status === 'active', 'inactive': element.status !== 'active'}">
                            {{ element.status | uppercase }}
                          </mat-chip>
                        </td>
                        
                       
                    </ng-container>

                    <ng-container matColumnDef="action">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header  class="fs-6"> Action </th>
                      <td mat-cell *matCellDef="let element" class='has_label_on_mobile' data-label='Action'>
                        <button
                          mat-icon-button
                          [matMenuTriggerFor]="menu"
                          aria-label="Example icon-button with a menu"
                        >
                          <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                          <button
                            mat-menu-item
                            (click)="openModal(createTenantComponet,element)"
                          >
                            <mat-icon>edit</mat-icon>
                            <span>Update</span>
                          </button>
                          <button
                            mat-menu-item
                            (click)="openDetailModal(viewTenantComponet,element)"
                          >
                            <mat-icon>open_in_new</mat-icon>
                            <span>View</span>
                          </button>
                        </mat-menu>
                      </td>
                    </ng-container>



                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                  </table>
                </div>
                <mat-paginator class="mt-3 responsive-paginator" #paginator [pageSize]="10" [length]="dataSource.data.length  || 0"
                  [pageSizeOptions]="pageSizeOptions" aria-label="Select page"></mat-paginator>
              </div>
            </div>
            <div *ngIf="!hasVisibleRows()">
              <div style="text-align: center; padding-bottom: 1rem">
                No data found
              </div>
            </div>
          </div>
          <div *ngIf="tableRow.length === 0">
            <div class="d-flex justify-content-center mt-4 mb-4">
              <span>No Data to display</span>
            </div>
          </div>
        </ng-container>
        <ng-template #load>
          <hr />
          <div class="d-flex justify-content-center">
            <div class="spinner-border" role="status">
              <span class="sr-only"></span>
            </div>
          </div>
        </ng-template>
      </div>
      <ng-template #createTenantComponet>
        <app-create-tenant (submitSuccess)="submit($event)" [rowdata]="rowdata"
          [modalService]="modalService"></app-create-tenant>
      </ng-template>

      <ng-template #viewTenantComponet let-modal="modal">
        <app-tenant-details [rowdata]="rowdata" [modalService]="modalService"></app-tenant-details>
      </ng-template>      
      
    </div>
  </div>
</div> 





